<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Custom imagery - Vespucci</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/docco.min.css">

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">

<!--
                <a class="navbar-brand" href="../../..">Vespucci</a> -->
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
<!--                            <li class="navitem">
                                <a href="../../.." class="nav-link">Vespucci</a>
</li> -->
                                <li class="navitem">
                                    
                                        <a href="../../.." class="nav-link"><img src="/vespucci_logo_small.png"></a>
                                </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Introduction <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../Introduction/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../../tutorials/features/" class="dropdown-item">Features</a>
</li>
                                    
<li>
    <a href="../20.1.0%20Release%20notes/" class="dropdown-item">20.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../20.0.0%20Release%20notes/" class="dropdown-item">20.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../19.3.0%20Release%20notes/" class="dropdown-item">19.3.0 Release notes</a>
</li>
                                    
<li>
    <a href="../19.2.0%20Release%20notes/" class="dropdown-item">19.2.0 Release notes</a>
</li>
                                    
<li>
    <a href="../19.1.0%20Release%20notes/" class="dropdown-item">19.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../19.0.0%20Release%20notes/" class="dropdown-item">19.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../18.1.0%20Release%20notes/" class="dropdown-item">18.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../18.0.0%20Release%20notes/" class="dropdown-item">18.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../17.1.0%20Release%20notes/" class="dropdown-item">17.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../17.0.0%20Release%20notes/" class="dropdown-item">17.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../16.1.0%20Release%20notes/" class="dropdown-item">16.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../16.0.0%20Release%20notes/" class="dropdown-item">16.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../15.2.0%20Release%20notes/" class="dropdown-item">15.2.0 Release notes</a>
</li>
                                    
<li>
    <a href="../15.1.0%20Release%20notes/" class="dropdown-item">15.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../15.0.0%20Release%20notes/" class="dropdown-item">15.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../14.1.0%20Release%20notes/" class="dropdown-item">14.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../14.0.0%20Release%20notes/" class="dropdown-item">14.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../13.1.0%20Release%20notes/" class="dropdown-item">13.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../13.0.0%20Release%20notes/" class="dropdown-item">13.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../12.1.0%20Release%20notes/" class="dropdown-item">12.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../12.0.0%20Release%20notes/" class="dropdown-item">12.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../11.2.0%20Release%20notes/" class="dropdown-item">11.2.0 Release notes</a>
</li>
                                    
<li>
    <a href="../11.1.0%20Release%20notes/" class="dropdown-item">11.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../11.0.0%20Release%20notes/" class="dropdown-item">11.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../10.2.0%20Release%20notes/" class="dropdown-item">10.2.0 Release notes</a>
</li>
                                    
<li>
    <a href="../10.1.0%20Release%20notes/" class="dropdown-item">10.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../10.0.0%20Release%20notes/" class="dropdown-item">10.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../0.9.9%20Release%20notes/" class="dropdown-item">0.9.9 Release notes</a>
</li>
                                    
<li>
    <a href="../0.9.8%20Release%20notes/" class="dropdown-item">0.9.8 Release notes</a>
</li>
                                    
<li>
    <a href="../0.9.7%20Release%20notes/" class="dropdown-item">0.9.7 Release notes</a>
</li>
                                    
<li>
    <a href="../0.9.6%20Release%20notes/" class="dropdown-item">0.9.6 Release notes</a>
</li>
                                    
<li>
    <a href="../../../tutorials/old_release_notes/" class="dropdown-item">Previous release notes</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Editing <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../Main%20map%20display/" class="dropdown-item">Main map display</a>
</li>
                                    
<li>
    <a href="../Simple%20actions/" class="dropdown-item">Simple actions</a>
</li>
                                    
<li>
    <a href="../Creating%20new%20objects/" class="dropdown-item">Creating new objects</a>
</li>
                                    
<li>
    <a href="../Node%20selected/" class="dropdown-item">Node selected</a>
</li>
                                    
<li>
    <a href="../Way%20selected/" class="dropdown-item">Way selected</a>
</li>
                                    
<li>
    <a href="../Relation%20selected/" class="dropdown-item">Relation selected</a>
</li>
                                    
<li>
    <a href="../New%20Note%20selected/" class="dropdown-item">New note selected</a>
</li>
                                    
<li>
    <a href="../Property%20editor/" class="dropdown-item">Property editor</a>
</li>
                                    
<li>
    <a href="../Multiselect/" class="dropdown-item">Multiselect</a>
</li>
                                    
<li>
    <a href="../Conflict%20resolution/" class="dropdown-item">Conflict resolution</a>
</li>
                                    
<li>
    <a href="../Presets/" class="dropdown-item">Presets</a>
</li>
                                    
<li>
    <a href="../Aligning%20background%20imagery/" class="dropdown-item">Aligning background imagery</a>
</li>
                                    
<li>
    <a href="../Keyboard/" class="dropdown-item">Keyboard and mouse</a>
</li>
                                    
<li>
    <a href="../GPS%20sources/" class="dropdown-item">GPS sources</a>
</li>
                                    
<li>
    <a href="../Tag%20filter/" class="dropdown-item">Tag based filter</a>
</li>
                                    
<li>
    <a href="../Preset%20filter/" class="dropdown-item">Preset based filter</a>
</li>
                                    
<li>
    <a href="../Opening%20hours/" class="dropdown-item">Opening hours</a>
</li>
                                    
<li>
    <a href="../Preferences/" class="dropdown-item">Preferences</a>
</li>
                                    
<li>
    <a href="../Advanced%20preferences/" class="dropdown-item">Advanced preferences</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Custom imagery</a>
</li>
                                    
<li>
    <a href="../Voice%20commands/" class="dropdown-item">Voice commands</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Tutorials and Posts <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../tutorials/network_location/" class="dropdown-item">"network" Location Provider Support</a>
</li>
                                    
<li>
    <a href="../../../tutorials/custom_imagery/" class="dropdown-item">Custom imagery</a>
</li>
                                    
<li>
    <a href="../../../tutorials/custom_imagery_mbtiles/" class="dropdown-item">Generating MBTiles files with custom imagery</a>
</li>
                                    
<li>
    <a href="../../../tutorials/name_suggestions/" class="dropdown-item">Using name suggestions</a>
</li>
                                    
<li>
    <a href="../../../tutorials/reporting_issues/" class="dropdown-item">Reporting Vespucci issues</a>
</li>
                                    
<li>
    <a href="../../../tutorials/tag_only/" class="dropdown-item">Tag-only editing</a>
</li>
                                    
<li>
    <a href="../../../tutorials/presets/" class="dropdown-item">Vespucci presets</a>
</li>
                                    
<li>
    <a href="../../../tutorials/data_styling/" class="dropdown-item">Vespucci data styling</a>
</li>
                                    
<li>
    <a href="../../../tutorials/vespucci_intents/" class="dropdown-item">Controlling Vespucci from other apps</a>
</li>
                                    
<li>
    <a href="../../../tutorials/object_search/" class="dropdown-item">Object search</a>
</li>
                                    
<li>
    <a href="../../../tutorials/offline/" class="dropdown-item">Going completely offline with Vespucci</a>
</li>
                                    
<li>
    <a href="../../../tutorials/mapbox-style/" class="dropdown-item">Mapbox-GL Style Support</a>
</li>
                                    
<li>
    <a href="../../../tutorials/todos/" class="dropdown-item">Todo file format description</a>
</li>
                                </ul>
                            </li>
<!--                            <li class="navitem">
                                <a href="../../../tutorials/screenshots/" class="nav-link">Videos & Screenshots</a>
</li> -->
                                <li class="navitem">
                                    
                                        <a href="../../../tutorials/screenshots/" class="nav-link">Videos & Screenshots</a>
                                </li>
<!--                            <li class="navitem">
                                <a href="../../../tutorials/faq/" class="nav-link">FAQ</a>
</li> -->
                                <li class="navitem">
                                    
                                        <a href="../../../tutorials/faq/" class="nav-link">FAQ</a>
                                </li>
<!--                            <li class="navitem">
                                <a href="../Privacy/" class="nav-link">Privacy</a>
</li> -->
                                <li class="navitem">
                                    
                                        <a href="../Privacy/" class="nav-link">Privacy</a>
                                </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>

<!--
                            <li class="nav-item">
                                <a rel="prev" href="../Advanced%20preferences/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../Voice%20commands/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li> -->
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
<!--                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#custom-imagery" class="nav-link">Custom imagery</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#supported-layer-types" class="nav-link">Supported layer types</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#adding-a-custom-imagery-source" class="nav-link">Adding a custom imagery source</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#mbtiles-and-pmtiles" class="nav-link">MBTiles and PMTiles</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
<div class="col-md-9" role="main">

<h1 id="custom-imagery">Custom imagery<a class="headerlink" href="#custom-imagery" title="Permanent link">#</a></h1>
<h2 id="supported-layer-types">Supported layer types<a class="headerlink" href="#supported-layer-types" title="Permanent link">#</a></h2>
<ul>
<li>google/OSM type tile servers (raster tiles and to a limited extent Mapbox Vector Tiles)</li>
<li>imagery layers in <a href="https://github.com/mapbox/mbtiles-spec">MBTiles</a> and <a href="https://github.com/protomaps/PMTiles/blob/main/spec/v3/spec.md">PMtiles V3</a> format on device</li>
<li>WMS servers supporting images in EPSG:3857 (including alternative names like EPSG:900913 etc) and EPSG:4326 projections</li>
</ul>
<p>Besides manually adding layers you can add WMS layers by querying a WMS server for a list of supported layers see <a href="../Main%20map%20display/#Layer%20control">layer control</a>, or by querying the Open Aerial Map (OAM) service.</p>
<p><strong>NOTE</strong> even though the URLs may look similar to those for a WMS layer, we do not support requesting data from ESRI MapServer with their native protocol.</p>
<h2 id="adding-a-custom-imagery-source">Adding a custom imagery source<a class="headerlink" href="#adding-a-custom-imagery-source" title="Permanent link">#</a></h2>
<p>To add a custom layer goto the <em>Preferences</em> screen and select <em>Custom imagery</em>, press the <em>+</em> button to add a new layer, or you can select the same from the layer control, "+" menu. In the form you can set</p>
<ul>
<li>a <strong>Name</strong> this is what is displayed in the <em>Layer control</em> background or overlay selection form. This field is <em>required</em>.</li>
<li>an <strong>URL</strong> the URL for the source with place holders. This field is <em>required</em>.</li>
<li>the <strong>Overlay</strong> flag, indicating that the layer is not a background, but partially transparent images for displaying over a background layer.</li>
<li><strong>Coverage</strong> left, bottom, right and top coordinates of a coverage bounding box in WGS84 coordinates, if the values are empty it is assumed that the layer covers the whole visible web-mercator area, that is -180°, -85°, 180°, 85°.</li>
<li><strong>Zoom</strong> <em>Min</em> and <em>Max</em> zoom levels, these indicates the minimum and maximum zoom levels available and are important for the app to determine over- and under-zoom correctly.</li>
<li><strong>Tile size</strong> side length in pixels for the tiles, default 256. <em>Available from version 16.0 and later</em></li>
</ul>
<p>Selecting the <em>Save</em> button will add the source to the configuration, <em>Save and set</em> will additionally add the source to the active layers as the current background for background imagery sources.</p>
<h3 id="remote-pmtiles-source">Remote PMTiles source<a class="headerlink" href="#remote-pmtiles-source" title="Permanent link">#</a></h3>
<p>To add a remote PMTiles source add the URL and then select <em>Save</em>. Vespucci will attempt to retrieve all necessary information for the entry from the remote source if the URL ends with <em>.pmtiles</em>.</p>
<h3 id="supported-place-holders">Supported place holders<a class="headerlink" href="#supported-place-holders" title="Permanent link">#</a></h3>
<p>Place holders are replaced when the application retrieves imagery files from the source and are replaced by calculated values. There are some variants even between applications that in principle use the same system, which are noted for completeness sake below.</p>
<p>The place holders have the general format of <strong>{</strong> <em>place holder name</em> <strong>}</strong>.</p>
<p><strong>{apikey}</strong> api key for sources that require it. <em>JOSM</em>, <em>iD</em>, <em>Vespucci (only in configuration files)</em> see <a href="https://github.com/MarcusWolschon/osmeditor4android/blob/master/src/main/assets/keys2-default.txt">key configuration example</a> for more information.</p>
<p><strong>{zoom}</strong> the zoom level</p>
<p><strong>{x}</strong> the x tile number</p>
<p><strong>{y}</strong> the y tile number</p>
<p><strong>{-y}</strong> the y tile number for sources using TMS tile numbering. <em>JOSM</em>, <em>iD</em>,  <em>Vespucci</em></p>
<p><strong>{ty}</strong> alternative for the y tile number for sources using TMS tile numbering. <em>iD</em>, <em>Vespucci</em></p>
<p><strong>{switch:a,b,c}</strong> rotating server selection (replace <em>a,b,c</em> by the actual sub-domains). <em>JOSM</em>, <em>iD</em>, <em>Vespucci</em></p>
<p><strong>{quadkey}</strong> used for Bing. <em>Vespucci</em></p>
<p><strong>{proj}</strong> projection for WMS servers. <em>JOSM</em>, <em>Vespucci (only in configuration files)</em></p>
<p><strong>{wkid}</strong> projection for proprietary ESRI servers. <em>JOSM</em>, <em>Vespucci (only in configuration files)</em></p>
<p><strong>{width}</strong> tile width for WMS servers. <em>JOSM</em>, <em>Vespucci</em></p>
<p><strong>{height}</strong> tile height for WMS servers. <em>JOSM</em>, <em>Vespucci</em></p>
<p><strong>{bbox}</strong> bounding box in <em>proj</em> coordinates for WMS servers. <em>JOSM</em>, <em>Vespucci</em></p>
<p><strong>{subdomain}</strong> reserved, used internally by <em>Vespucci</em></p>
<h5 id="required-placeholders">Required placeholders<a class="headerlink" href="#required-placeholders" title="Permanent link">#</a></h5>
<p>Note: remote PMTiles sources do not require any placeholders.</p>
<ul>
<li>A valid normal (non-Bing) URL for a tile server must contain at least at least <strong>{zoom}</strong>, <strong>{x}</strong> and one of <strong>{y}</strong>, <strong>{-y}</strong> or <strong>{ty}</strong>.</li>
<li>A valid WMS entry must be a legal WMS URL for a layer containing at least <strong>{width}</strong>, <strong>{height}</strong> and <strong>{bbox}</strong> place holders. Note: do not add a <strong>{proj}</strong> place holder when adding such a layer in the "Custom imagery" form in Vespucci (it is supported in the configuration files), simply leave the SRS or CRS attribute in the URL as is with the desired projection value.</li>
</ul>
<h3 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">#</a></h3>
<p>Tile server example:</p>
<pre><code>http://tiles.poole.ch/AGIS/OF2011/{zoom}/{x}/{y}.png
</code></pre>
<p>WMS server example:</p>
<pre><code>https://geodienste.sachsen.de/wms_geosn_dop-rgb/guest?FORMAT=image/jpeg&amp;VERSION=1.1.1&amp;SERVICE=WMS&amp;REQUEST=GetMap&amp;LAYERS=sn_dop_020&amp;STYLES=&amp;SRS=EPSG:3857&amp;WIDTH={width}&amp;HEIGHT={height}&amp;BBOX={bbox}
</code></pre>
<p>PMTiles example:</p>
<pre><code>https://r2-public.protomaps.com/protomaps-sample-datasets/overture-pois.pmtiles
</code></pre>
<h2 id="mbtiles-and-pmtiles">MBTiles and PMTiles<a class="headerlink" href="#mbtiles-and-pmtiles" title="Permanent link">#</a></h2>
<p>To add a MBTiles or PMTIles layer, down/upload the file to your device, then go to the <em>Custom imagery</em> form as described above. Tap the <em>SD card</em> icon, navigate to the folder where you saved the file and select it. The form should now be filled out with all necessary values.</p>
<p>Notes:</p>
<ul>
<li>Older MBTiles formats do not contain meta-data for min and max zoom levels, the query that determines the values from the actual file contents may take a long time to run if the file is large.</li>
<li>Vespucci currently supports png, jpg and mvt contents.</li>
<li>You can adjust all values in the form before saving if necessary with exception of the URL field that contains the path to the file.</li>
<li>You can create MBTiles files for example with <a href="https://sourceforge.net/projects/mobac/">MOBAC</a> and many other tools, some more information can be found on the <a href="https://github.com/hotosm/toolbox/wiki/4.5-Creating-.mbtiles">HOT toolbox site</a> and the <a href="custom_imagery_mbtiles.md">separate tutorial about the generation of custom MBTiles files</a>. </li>
</ul></div> -->
		    
                    	<div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#custom-imagery" class="nav-link">Custom imagery</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#supported-layer-types" class="nav-link">Supported layer types</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#adding-a-custom-imagery-source" class="nav-link">Adding a custom imagery source</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#mbtiles-and-pmtiles" class="nav-link">MBTiles and PMTiles</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    	<div class="col-md-9" role="main">

<h1 id="custom-imagery">Custom imagery<a class="headerlink" href="#custom-imagery" title="Permanent link">#</a></h1>
<h2 id="supported-layer-types">Supported layer types<a class="headerlink" href="#supported-layer-types" title="Permanent link">#</a></h2>
<ul>
<li>google/OSM type tile servers (raster tiles and to a limited extent Mapbox Vector Tiles)</li>
<li>imagery layers in <a href="https://github.com/mapbox/mbtiles-spec">MBTiles</a> and <a href="https://github.com/protomaps/PMTiles/blob/main/spec/v3/spec.md">PMtiles V3</a> format on device</li>
<li>WMS servers supporting images in EPSG:3857 (including alternative names like EPSG:900913 etc) and EPSG:4326 projections</li>
</ul>
<p>Besides manually adding layers you can add WMS layers by querying a WMS server for a list of supported layers see <a href="../Main%20map%20display/#Layer%20control">layer control</a>, or by querying the Open Aerial Map (OAM) service.</p>
<p><strong>NOTE</strong> even though the URLs may look similar to those for a WMS layer, we do not support requesting data from ESRI MapServer with their native protocol.</p>
<h2 id="adding-a-custom-imagery-source">Adding a custom imagery source<a class="headerlink" href="#adding-a-custom-imagery-source" title="Permanent link">#</a></h2>
<p>To add a custom layer goto the <em>Preferences</em> screen and select <em>Custom imagery</em>, press the <em>+</em> button to add a new layer, or you can select the same from the layer control, "+" menu. In the form you can set</p>
<ul>
<li>a <strong>Name</strong> this is what is displayed in the <em>Layer control</em> background or overlay selection form. This field is <em>required</em>.</li>
<li>an <strong>URL</strong> the URL for the source with place holders. This field is <em>required</em>.</li>
<li>the <strong>Overlay</strong> flag, indicating that the layer is not a background, but partially transparent images for displaying over a background layer.</li>
<li><strong>Coverage</strong> left, bottom, right and top coordinates of a coverage bounding box in WGS84 coordinates, if the values are empty it is assumed that the layer covers the whole visible web-mercator area, that is -180°, -85°, 180°, 85°.</li>
<li><strong>Zoom</strong> <em>Min</em> and <em>Max</em> zoom levels, these indicates the minimum and maximum zoom levels available and are important for the app to determine over- and under-zoom correctly.</li>
<li><strong>Tile size</strong> side length in pixels for the tiles, default 256. <em>Available from version 16.0 and later</em></li>
</ul>
<p>Selecting the <em>Save</em> button will add the source to the configuration, <em>Save and set</em> will additionally add the source to the active layers as the current background for background imagery sources.</p>
<h3 id="remote-pmtiles-source">Remote PMTiles source<a class="headerlink" href="#remote-pmtiles-source" title="Permanent link">#</a></h3>
<p>To add a remote PMTiles source add the URL and then select <em>Save</em>. Vespucci will attempt to retrieve all necessary information for the entry from the remote source if the URL ends with <em>.pmtiles</em>.</p>
<h3 id="supported-place-holders">Supported place holders<a class="headerlink" href="#supported-place-holders" title="Permanent link">#</a></h3>
<p>Place holders are replaced when the application retrieves imagery files from the source and are replaced by calculated values. There are some variants even between applications that in principle use the same system, which are noted for completeness sake below.</p>
<p>The place holders have the general format of <strong>{</strong> <em>place holder name</em> <strong>}</strong>.</p>
<p><strong>{apikey}</strong> api key for sources that require it. <em>JOSM</em>, <em>iD</em>, <em>Vespucci (only in configuration files)</em> see <a href="https://github.com/MarcusWolschon/osmeditor4android/blob/master/src/main/assets/keys2-default.txt">key configuration example</a> for more information.</p>
<p><strong>{zoom}</strong> the zoom level</p>
<p><strong>{x}</strong> the x tile number</p>
<p><strong>{y}</strong> the y tile number</p>
<p><strong>{-y}</strong> the y tile number for sources using TMS tile numbering. <em>JOSM</em>, <em>iD</em>,  <em>Vespucci</em></p>
<p><strong>{ty}</strong> alternative for the y tile number for sources using TMS tile numbering. <em>iD</em>, <em>Vespucci</em></p>
<p><strong>{switch:a,b,c}</strong> rotating server selection (replace <em>a,b,c</em> by the actual sub-domains). <em>JOSM</em>, <em>iD</em>, <em>Vespucci</em></p>
<p><strong>{quadkey}</strong> used for Bing. <em>Vespucci</em></p>
<p><strong>{proj}</strong> projection for WMS servers. <em>JOSM</em>, <em>Vespucci (only in configuration files)</em></p>
<p><strong>{wkid}</strong> projection for proprietary ESRI servers. <em>JOSM</em>, <em>Vespucci (only in configuration files)</em></p>
<p><strong>{width}</strong> tile width for WMS servers. <em>JOSM</em>, <em>Vespucci</em></p>
<p><strong>{height}</strong> tile height for WMS servers. <em>JOSM</em>, <em>Vespucci</em></p>
<p><strong>{bbox}</strong> bounding box in <em>proj</em> coordinates for WMS servers. <em>JOSM</em>, <em>Vespucci</em></p>
<p><strong>{subdomain}</strong> reserved, used internally by <em>Vespucci</em></p>
<h5 id="required-placeholders">Required placeholders<a class="headerlink" href="#required-placeholders" title="Permanent link">#</a></h5>
<p>Note: remote PMTiles sources do not require any placeholders.</p>
<ul>
<li>A valid normal (non-Bing) URL for a tile server must contain at least at least <strong>{zoom}</strong>, <strong>{x}</strong> and one of <strong>{y}</strong>, <strong>{-y}</strong> or <strong>{ty}</strong>.</li>
<li>A valid WMS entry must be a legal WMS URL for a layer containing at least <strong>{width}</strong>, <strong>{height}</strong> and <strong>{bbox}</strong> place holders. Note: do not add a <strong>{proj}</strong> place holder when adding such a layer in the "Custom imagery" form in Vespucci (it is supported in the configuration files), simply leave the SRS or CRS attribute in the URL as is with the desired projection value.</li>
</ul>
<h3 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">#</a></h3>
<p>Tile server example:</p>
<pre><code>http://tiles.poole.ch/AGIS/OF2011/{zoom}/{x}/{y}.png
</code></pre>
<p>WMS server example:</p>
<pre><code>https://geodienste.sachsen.de/wms_geosn_dop-rgb/guest?FORMAT=image/jpeg&amp;VERSION=1.1.1&amp;SERVICE=WMS&amp;REQUEST=GetMap&amp;LAYERS=sn_dop_020&amp;STYLES=&amp;SRS=EPSG:3857&amp;WIDTH={width}&amp;HEIGHT={height}&amp;BBOX={bbox}
</code></pre>
<p>PMTiles example:</p>
<pre><code>https://r2-public.protomaps.com/protomaps-sample-datasets/overture-pois.pmtiles
</code></pre>
<h2 id="mbtiles-and-pmtiles">MBTiles and PMTiles<a class="headerlink" href="#mbtiles-and-pmtiles" title="Permanent link">#</a></h2>
<p>To add a MBTiles or PMTIles layer, down/upload the file to your device, then go to the <em>Custom imagery</em> form as described above. Tap the <em>SD card</em> icon, navigate to the folder where you saved the file and select it. The form should now be filled out with all necessary values.</p>
<p>Notes:</p>
<ul>
<li>Older MBTiles formats do not contain meta-data for min and max zoom levels, the query that determines the values from the actual file contents may take a long time to run if the file is large.</li>
<li>Vespucci currently supports png, jpg and mvt contents.</li>
<li>You can adjust all values in the form before saving if necessary with exception of the URL field that contains the path to the file.</li>
<li>You can create MBTiles files for example with <a href="https://sourceforge.net/projects/mobac/">MOBAC</a> and many other tools, some more information can be found on the <a href="https://github.com/hotosm/toolbox/wiki/4.5-Creating-.mbtiles">HOT toolbox site</a> and the <a href="custom_imagery_mbtiles.md">separate tutorial about the generation of custom MBTiles files</a>. </li>
</ul></div>
                    
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
	    <!--            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p> -->
	    <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> for Vespucci 20.1.0 </p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
