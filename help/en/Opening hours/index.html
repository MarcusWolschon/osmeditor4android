<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Opening hours - Vespucci</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/docco.min.css">

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">

<!--
                <a class="navbar-brand" href="../../..">Vespucci</a> -->
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
<!--                            <li class="navitem">
                                <a href="../../.." class="nav-link">Vespucci</a>
</li> -->
                                <li class="navitem">
                                    
                                        <a href="../../.." class="nav-link"><img src="/vespucci_logo_small.png"></a>
                                </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Introduction <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../Introduction/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../../tutorials/features/" class="dropdown-item">Features</a>
</li>
                                    
<li>
    <a href="../20.2.0%20Release%20notes/" class="dropdown-item">20.2.0 Release notes</a>
</li>
                                    
<li>
    <a href="../20.1.0%20Release%20notes/" class="dropdown-item">20.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../20.0.0%20Release%20notes/" class="dropdown-item">20.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../19.3.0%20Release%20notes/" class="dropdown-item">19.3.0 Release notes</a>
</li>
                                    
<li>
    <a href="../19.2.0%20Release%20notes/" class="dropdown-item">19.2.0 Release notes</a>
</li>
                                    
<li>
    <a href="../19.1.0%20Release%20notes/" class="dropdown-item">19.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../19.0.0%20Release%20notes/" class="dropdown-item">19.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../18.1.0%20Release%20notes/" class="dropdown-item">18.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../18.0.0%20Release%20notes/" class="dropdown-item">18.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../17.1.0%20Release%20notes/" class="dropdown-item">17.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../17.0.0%20Release%20notes/" class="dropdown-item">17.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../16.1.0%20Release%20notes/" class="dropdown-item">16.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../16.0.0%20Release%20notes/" class="dropdown-item">16.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../15.2.0%20Release%20notes/" class="dropdown-item">15.2.0 Release notes</a>
</li>
                                    
<li>
    <a href="../15.1.0%20Release%20notes/" class="dropdown-item">15.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../15.0.0%20Release%20notes/" class="dropdown-item">15.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../14.1.0%20Release%20notes/" class="dropdown-item">14.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../14.0.0%20Release%20notes/" class="dropdown-item">14.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../13.1.0%20Release%20notes/" class="dropdown-item">13.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../13.0.0%20Release%20notes/" class="dropdown-item">13.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../12.1.0%20Release%20notes/" class="dropdown-item">12.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../12.0.0%20Release%20notes/" class="dropdown-item">12.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../11.2.0%20Release%20notes/" class="dropdown-item">11.2.0 Release notes</a>
</li>
                                    
<li>
    <a href="../11.1.0%20Release%20notes/" class="dropdown-item">11.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../11.0.0%20Release%20notes/" class="dropdown-item">11.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../10.2.0%20Release%20notes/" class="dropdown-item">10.2.0 Release notes</a>
</li>
                                    
<li>
    <a href="../10.1.0%20Release%20notes/" class="dropdown-item">10.1.0 Release notes</a>
</li>
                                    
<li>
    <a href="../10.0.0%20Release%20notes/" class="dropdown-item">10.0.0 Release notes</a>
</li>
                                    
<li>
    <a href="../0.9.9%20Release%20notes/" class="dropdown-item">0.9.9 Release notes</a>
</li>
                                    
<li>
    <a href="../0.9.8%20Release%20notes/" class="dropdown-item">0.9.8 Release notes</a>
</li>
                                    
<li>
    <a href="../0.9.7%20Release%20notes/" class="dropdown-item">0.9.7 Release notes</a>
</li>
                                    
<li>
    <a href="../0.9.6%20Release%20notes/" class="dropdown-item">0.9.6 Release notes</a>
</li>
                                    
<li>
    <a href="../../../tutorials/old_release_notes/" class="dropdown-item">Previous release notes</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Editing <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../Main%20map%20display/" class="dropdown-item">Main map display</a>
</li>
                                    
<li>
    <a href="../Simple%20actions/" class="dropdown-item">Simple actions</a>
</li>
                                    
<li>
    <a href="../Creating%20new%20objects/" class="dropdown-item">Creating new objects</a>
</li>
                                    
<li>
    <a href="../Node%20selected/" class="dropdown-item">Node selected</a>
</li>
                                    
<li>
    <a href="../Way%20selected/" class="dropdown-item">Way selected</a>
</li>
                                    
<li>
    <a href="../Relation%20selected/" class="dropdown-item">Relation selected</a>
</li>
                                    
<li>
    <a href="../New%20Note%20selected/" class="dropdown-item">New note selected</a>
</li>
                                    
<li>
    <a href="../Property%20editor/" class="dropdown-item">Property editor</a>
</li>
                                    
<li>
    <a href="../Multiselect/" class="dropdown-item">Multiselect</a>
</li>
                                    
<li>
    <a href="../Tag%20only%20mode/" class="dropdown-item">Tag only mode</a>
</li>
                                    
<li>
    <a href="../Indoor%20mode/" class="dropdown-item">Indoor mode</a>
</li>
                                    
<li>
    <a href="../Address%20mode/" class="dropdown-item">Address mode</a>
</li>
                                    
<li>
    <a href="../Uploading%20your%20changes/" class="dropdown-item">Uploading your changes</a>
</li>
                                    
<li>
    <a href="../Conflict%20resolution/" class="dropdown-item">Conflict resolution</a>
</li>
                                    
<li>
    <a href="../Presets/" class="dropdown-item">Presets</a>
</li>
                                    
<li>
    <a href="../Aligning%20background%20imagery/" class="dropdown-item">Aligning background imagery</a>
</li>
                                    
<li>
    <a href="../Keyboard/" class="dropdown-item">Keyboard and mouse</a>
</li>
                                    
<li>
    <a href="../GPS%20sources/" class="dropdown-item">GPS sources</a>
</li>
                                    
<li>
    <a href="../Tag%20filter/" class="dropdown-item">Tag based filter</a>
</li>
                                    
<li>
    <a href="../Preset%20filter/" class="dropdown-item">Preset based filter</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Opening hours</a>
</li>
                                    
<li>
    <a href="../Preferences/" class="dropdown-item">Preferences</a>
</li>
                                    
<li>
    <a href="../Advanced%20preferences/" class="dropdown-item">Advanced preferences</a>
</li>
                                    
<li>
    <a href="../Custom%20imagery/" class="dropdown-item">Custom imagery</a>
</li>
                                    
<li>
    <a href="../Voice%20commands/" class="dropdown-item">Voice commands</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Tutorials and Posts <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../tutorials/network_location/" class="dropdown-item">"network" Location Provider Support</a>
</li>
                                    
<li>
    <a href="../../../tutorials/custom_imagery/" class="dropdown-item">Custom imagery</a>
</li>
                                    
<li>
    <a href="../../../tutorials/custom_imagery_mbtiles/" class="dropdown-item">Generating MBTiles files with custom imagery</a>
</li>
                                    
<li>
    <a href="../../../tutorials/name_suggestions/" class="dropdown-item">Using name suggestions</a>
</li>
                                    
<li>
    <a href="../../../tutorials/reporting_issues/" class="dropdown-item">Reporting Vespucci issues</a>
</li>
                                    
<li>
    <a href="../../../tutorials/tag_only/" class="dropdown-item">Tag-only editing</a>
</li>
                                    
<li>
    <a href="../../../tutorials/presets/" class="dropdown-item">Vespucci presets</a>
</li>
                                    
<li>
    <a href="../../../tutorials/data_styling/" class="dropdown-item">Vespucci data styling</a>
</li>
                                    
<li>
    <a href="../../../tutorials/vespucci_intents/" class="dropdown-item">Controlling Vespucci from other apps</a>
</li>
                                    
<li>
    <a href="../../../tutorials/object_search/" class="dropdown-item">Object search</a>
</li>
                                    
<li>
    <a href="../../../tutorials/offline/" class="dropdown-item">Going completely offline with Vespucci</a>
</li>
                                    
<li>
    <a href="../../../tutorials/offline_guide/" class="dropdown-item">Offline data guide</a>
</li>
                                    
<li>
    <a href="../../../tutorials/mapbox-style/" class="dropdown-item">Mapbox-GL Style Support</a>
</li>
                                    
<li>
    <a href="../../../tutorials/todos/" class="dropdown-item">Todo file format description</a>
</li>
                                </ul>
                            </li>
<!--                            <li class="navitem">
                                <a href="../../../tutorials/screenshots/" class="nav-link">Videos & Screenshots</a>
</li> -->
                                <li class="navitem">
                                    
                                        <a href="../../../tutorials/screenshots/" class="nav-link">Videos & Screenshots</a>
                                </li>
<!--                            <li class="navitem">
                                <a href="../../../tutorials/faq/" class="nav-link">FAQ</a>
</li> -->
                                <li class="navitem">
                                    
                                        <a href="../../../tutorials/faq/" class="nav-link">FAQ</a>
                                </li>
<!--                            <li class="navitem">
                                <a href="../Privacy/" class="nav-link">Privacy</a>
</li> -->
                                <li class="navitem">
                                    
                                        <a href="../Privacy/" class="nav-link">Privacy</a>
                                </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>

<!--
                            <li class="nav-item">
                                <a rel="prev" href="../Preset%20filter/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../Preferences/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li> -->
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
<!--                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#openstreetmap-opening-hours-editor" class="nav-link">OpenStreetMap opening hours editor</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#using-the-opening-hours-editor" class="nav-link">Using the opening hours editor</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
<div class="col-md-9" role="main">

<h1 id="openstreetmap-opening-hours-editor">OpenStreetMap opening hours editor<a class="headerlink" href="#openstreetmap-opening-hours-editor" title="Permanent link">#</a></h1>
<p>The OpenStreetMap opening hours specification is fairly complex and does not readily lend itself to a simple and intuitive user interface.</p>
<p>However most of the time you will likely only be using a small part of the definition. The editor takes this in to account by trying to hide the more obscure features in menus and most of the time reducing the "on the road" use to small customizations of pre-defined templates.</p>
<p><em>This documentation is preliminary and a work in progress</em></p>
<h2 id="using-the-opening-hours-editor">Using the opening hours editor<a class="headerlink" href="#using-the-opening-hours-editor" title="Permanent link">#</a></h2>
<p>In a typical workflow the object you are editing will either already have an opening hours tag (opening_hours, service_times and collection_times) or you can re-apply the preset for the object to get an empty opening hours field. If you need to add the field manually and you are using Vespucci you can enter the key on the details page and then switch back to the form based tab to edit. If you believe that the opening hours tag should have been part of the preset, please open an issue for your editor.</p>
<p>If you have defined a default template (do this via the "Manage templates" menu item) it will be loaded automatically when the editor is started with an empty value. With the "Load template" function you can load any saved template and with the "Save template" menu you can save the current value as a template. You can define separate templates and defaults for specific key, for example "opening_hours", "collection_times" and "service_times" or custom values. Further you can limit applicability of a template to a region and a specific identifier, typically an OSM top-level tag (for example amenity=restaurant). </p>
<p>Naturally you can build an opening hours value from scratch, but we would recommend using one of the existing templates as a starting point.</p>
<p>If an existing opening hours value is loaded, an attempt is made to auto-correct it to conform to the opening hours specification. If that is not possible the rough location where the error occurred will be highlighted in the display of the raw OH value and you can try and correct it manually. Roughly a quarter of the OH values in the OpenStreetMap database have problems, but less than 10% can't be corrected, see <a href="https://github.com/simonpoole/OpeningHoursParser">OpeningHoursParser</a> for more information on what deviations from the specification are tolerated.</p>
<h3 id="main-menu-button">Main menu button<a class="headerlink" href="#main-menu-button" title="Permanent link">#</a></h3>
<ul>
<li><strong>Add rule</strong>: add a new rule.</li>
<li><strong>Add rule for holidays</strong>: add a new rule for a holiday together with a state change.</li>
<li><strong>Add rule for 24/7</strong>: add a rule for an object that is always open, the opening hours specification doesn't support any other sub values for 24/7 however we do allow adding of higher level selectors (for example year ranges).</li>
<li><strong>Load template</strong>: load an existing template.</li>
<li><strong>Save to template</strong>: save the current opening hours value as a template for future use.</li>
<li><strong>Manage templates</strong>: edit, for example change the name, and delete existing templates.</li>
<li><strong>Refresh</strong>: re-parse the opening hour value.</li>
<li><strong>Delete all</strong>: remove all rules.</li>
</ul>
<h3 id="rules">Rules<a class="headerlink" href="#rules" title="Permanent link">#</a></h3>
<p>Default rules are added as <em>normal</em> rules, this implies that they will override the values of previous rules for the same days. This can be a concern when specifying extended times, typically you will then want to switch the rules via the <em>Show rule type</em> menu entry to <em>additive</em>.</p>
<h4 id="rule-menu">Rule menu<a class="headerlink" href="#rule-menu" title="Permanent link">#</a></h4>
<ul>
<li><strong>Add modifier/comment</strong>: change the effect of this rule and add an optional comment.</li>
<li><strong>Add holiday</strong>: add a selector for public or school holidays.</li>
<li><strong>Add time span...</strong><ul>
<li><strong>Time - time</strong>: a start time to an end time on the same day.</li>
<li><strong>Time - extended time</strong>: a start time to an end time on the next day (example 26:00 is 02:00 (am) the next day).</li>
<li><strong>Var. time - time</strong>: from a start variable time (dawn, dusk, sunrise and sundown) to an end time on the same day.</li>
<li><strong>Var. time - extended time</strong>: from a start variable time to an end time on the next day.</li>
<li><strong>Time - var. time</strong>: a start time to an end variable time.</li>
<li><strong>Var. time - var. time</strong>: a start variable time to an end variable time.</li>
<li><strong>Time</strong>: a point in time.</li>
<li><strong>Time-open end</strong>: from a start point in time onwards.</li>
<li><strong>Variable time</strong>: at the variable time</li>
<li><strong>Variable time-open end</strong>: from a start variable time onwards</li>
</ul>
</li>
<li><strong>Add week day range</strong>: add a weekday based selector.</li>
<li><strong>Add date range...</strong><ul>
<li><strong>Date - date</strong>: from a start date (year, month, day) to an end date.</li>
<li><strong>Variable date - date</strong>: from a start variable date (currently the specification only defines <em>easter</em>) to an end date.</li>
<li><strong>Date - variable date</strong>: from a start date to a variable date.</li>
<li><strong>Variable date - variable date</strong>: from a start variable date to an end variable date.</li>
<li><strong>Occurrence in month - occurrence in month</strong>: from a start weekday occurrence in a month to the same.</li>
<li><strong>Occurrence in month - date</strong>: from a start weekday occurrence in a month to a end date.</li>
<li><strong>Date - occurrence in month</strong>: from a start date to an end weekday occurrence in a month.</li>
<li><strong>Occurrence in month - variable date</strong>: from a start weekday occurrence in a month to an end variable date.</li>
<li><strong>Variable date - occurrence in month</strong>: from a start variable date to an end weekday occurrence in a month.</li>
<li><strong>Date - open end</strong>: from a start date onwards.</li>
<li><strong>Variable date - open end</strong>: from a start variable date onwards.</li>
<li><strong>Occurrence in month - open end</strong>: from a start weekday occurrence in a month onwards.</li>
<li><strong>With offsets...</strong>: the same entries as above however with offsets specified (this is rarely used).</li>
</ul>
</li>
<li><strong>Add year range...</strong>    <ul>
<li><strong>Add year range</strong>: add a year based selector.</li>
<li><strong>Add starting year</strong>: add an open ended year range.</li>
</ul>
</li>
<li><strong>Add week range</strong>: add a week number based selector.</li>
<li><strong>Duplicate</strong>: create a copy of this rule and insert it after the current position.</li>
<li><strong>Show rule type</strong>: display and allow changing of the rule type <em>normal</em>, <em>additive</em> and <em>fallback</em> (not available on the first rule).</li>
<li><strong>Move up</strong>: move this rule up one position (not available on the first rule).</li>
<li><strong>Move down</strong>: move this rule down one position.</li>
<li><strong>Delete</strong>: delete this rule.</li>
</ul>
<h3 id="time-spans">Time spans<a class="headerlink" href="#time-spans" title="Permanent link">#</a></h3>
<p>To make editing time spans as easy as possible, we try to choose an optimal time range and granularity for the range bars when loading existing values. For new time spans the bars start at 6:00 (am) and have 15 minute increments, this can be changed via the menu.</p>
<p>Clicking (not on the pins) the time bar will open the large time picker, when using the bars directly is too difficult. The time pickers extend in to the next day, so they are a simple way to extend a time range without having to delete and re-add the the range.</p>
<h4 id="time-span-menu">Time span menu<a class="headerlink" href="#time-span-menu" title="Permanent link">#</a></h4>
<ul>
<li><strong>Display time picker</strong>: show a large time picker for selecting start and end time, on very small displays this is the preferred way of changing times.</li>
<li><strong>Switch to 15 minute ticks</strong>: use 15 minute granularity for the range bar.</li>
<li><strong>Switch to 5 minute ticks</strong>: use 5 minute granularity for the range bar.</li>
<li><strong>Switch to 1 minute ticks</strong>: use 1 minute granularity for the range bar, very difficult to use on a phone.</li>
<li><strong>Start at midnight</strong>: start the range bar at midnight.</li>
<li><strong>Show interval</strong>: show the interval field for specifying an interval in minutes.</li>
<li><strong>Delete</strong>: delete this time span.</li>
</ul>
<h3 id="manage-templates">Manage templates<a class="headerlink" href="#manage-templates" title="Permanent link">#</a></h3>
<p>The template management dialog allows you to add, edit and delete templates.</p>
<p>In Android 4.4 and later the following additional functionality is available from the menu button. </p>
<ul>
<li><strong>Show all</strong>: display all templates in the database.</li>
<li><strong>Save to file</strong>: write the contents of the template database to a file.</li>
<li><strong>Load from file (replace)</strong>: load templates from a file replacing the current contents of the database.</li>
<li><strong>Load from file</strong>: load templates from a file retaining the current contents.</li>
</ul>
<h4 id="save-and-edit-template-dialogs">Save and edit template dialogs<a class="headerlink" href="#save-and-edit-template-dialogs" title="Permanent link">#</a></h4>
<p>The dialog allows you to set</p>
<ul>
<li><strong>Name</strong> a descriptive name for the template.</li>
<li><strong>Default</strong> if checked this will be consider as a default template (typically further constrained by the other fields).</li>
<li><strong>Key</strong> the key this template is relevant for, if set to <em>Custom key</em> you can add a non-standard value in the field below. The key values support SQL wild cards, that is <em>%</em> matches zero or more characters, <em>_</em> matches a single character. Both wild card characters can be escaped with <em>\</em> for literal matches.</li>
<li><strong>Region</strong> the region the template is applicable to.</li>
<li><strong>Object</strong> an application specific string to use for matching.</li>
</ul></div> -->
		    
                    	<div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#openstreetmap-opening-hours-editor" class="nav-link">OpenStreetMap opening hours editor</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#using-the-opening-hours-editor" class="nav-link">Using the opening hours editor</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    	<div class="col-md-9" role="main">

<h1 id="openstreetmap-opening-hours-editor">OpenStreetMap opening hours editor<a class="headerlink" href="#openstreetmap-opening-hours-editor" title="Permanent link">#</a></h1>
<p>The OpenStreetMap opening hours specification is fairly complex and does not readily lend itself to a simple and intuitive user interface.</p>
<p>However most of the time you will likely only be using a small part of the definition. The editor takes this in to account by trying to hide the more obscure features in menus and most of the time reducing the "on the road" use to small customizations of pre-defined templates.</p>
<p><em>This documentation is preliminary and a work in progress</em></p>
<h2 id="using-the-opening-hours-editor">Using the opening hours editor<a class="headerlink" href="#using-the-opening-hours-editor" title="Permanent link">#</a></h2>
<p>In a typical workflow the object you are editing will either already have an opening hours tag (opening_hours, service_times and collection_times) or you can re-apply the preset for the object to get an empty opening hours field. If you need to add the field manually and you are using Vespucci you can enter the key on the details page and then switch back to the form based tab to edit. If you believe that the opening hours tag should have been part of the preset, please open an issue for your editor.</p>
<p>If you have defined a default template (do this via the "Manage templates" menu item) it will be loaded automatically when the editor is started with an empty value. With the "Load template" function you can load any saved template and with the "Save template" menu you can save the current value as a template. You can define separate templates and defaults for specific key, for example "opening_hours", "collection_times" and "service_times" or custom values. Further you can limit applicability of a template to a region and a specific identifier, typically an OSM top-level tag (for example amenity=restaurant). </p>
<p>Naturally you can build an opening hours value from scratch, but we would recommend using one of the existing templates as a starting point.</p>
<p>If an existing opening hours value is loaded, an attempt is made to auto-correct it to conform to the opening hours specification. If that is not possible the rough location where the error occurred will be highlighted in the display of the raw OH value and you can try and correct it manually. Roughly a quarter of the OH values in the OpenStreetMap database have problems, but less than 10% can't be corrected, see <a href="https://github.com/simonpoole/OpeningHoursParser">OpeningHoursParser</a> for more information on what deviations from the specification are tolerated.</p>
<h3 id="main-menu-button">Main menu button<a class="headerlink" href="#main-menu-button" title="Permanent link">#</a></h3>
<ul>
<li><strong>Add rule</strong>: add a new rule.</li>
<li><strong>Add rule for holidays</strong>: add a new rule for a holiday together with a state change.</li>
<li><strong>Add rule for 24/7</strong>: add a rule for an object that is always open, the opening hours specification doesn't support any other sub values for 24/7 however we do allow adding of higher level selectors (for example year ranges).</li>
<li><strong>Load template</strong>: load an existing template.</li>
<li><strong>Save to template</strong>: save the current opening hours value as a template for future use.</li>
<li><strong>Manage templates</strong>: edit, for example change the name, and delete existing templates.</li>
<li><strong>Refresh</strong>: re-parse the opening hour value.</li>
<li><strong>Delete all</strong>: remove all rules.</li>
</ul>
<h3 id="rules">Rules<a class="headerlink" href="#rules" title="Permanent link">#</a></h3>
<p>Default rules are added as <em>normal</em> rules, this implies that they will override the values of previous rules for the same days. This can be a concern when specifying extended times, typically you will then want to switch the rules via the <em>Show rule type</em> menu entry to <em>additive</em>.</p>
<h4 id="rule-menu">Rule menu<a class="headerlink" href="#rule-menu" title="Permanent link">#</a></h4>
<ul>
<li><strong>Add modifier/comment</strong>: change the effect of this rule and add an optional comment.</li>
<li><strong>Add holiday</strong>: add a selector for public or school holidays.</li>
<li><strong>Add time span...</strong><ul>
<li><strong>Time - time</strong>: a start time to an end time on the same day.</li>
<li><strong>Time - extended time</strong>: a start time to an end time on the next day (example 26:00 is 02:00 (am) the next day).</li>
<li><strong>Var. time - time</strong>: from a start variable time (dawn, dusk, sunrise and sundown) to an end time on the same day.</li>
<li><strong>Var. time - extended time</strong>: from a start variable time to an end time on the next day.</li>
<li><strong>Time - var. time</strong>: a start time to an end variable time.</li>
<li><strong>Var. time - var. time</strong>: a start variable time to an end variable time.</li>
<li><strong>Time</strong>: a point in time.</li>
<li><strong>Time-open end</strong>: from a start point in time onwards.</li>
<li><strong>Variable time</strong>: at the variable time</li>
<li><strong>Variable time-open end</strong>: from a start variable time onwards</li>
</ul>
</li>
<li><strong>Add week day range</strong>: add a weekday based selector.</li>
<li><strong>Add date range...</strong><ul>
<li><strong>Date - date</strong>: from a start date (year, month, day) to an end date.</li>
<li><strong>Variable date - date</strong>: from a start variable date (currently the specification only defines <em>easter</em>) to an end date.</li>
<li><strong>Date - variable date</strong>: from a start date to a variable date.</li>
<li><strong>Variable date - variable date</strong>: from a start variable date to an end variable date.</li>
<li><strong>Occurrence in month - occurrence in month</strong>: from a start weekday occurrence in a month to the same.</li>
<li><strong>Occurrence in month - date</strong>: from a start weekday occurrence in a month to a end date.</li>
<li><strong>Date - occurrence in month</strong>: from a start date to an end weekday occurrence in a month.</li>
<li><strong>Occurrence in month - variable date</strong>: from a start weekday occurrence in a month to an end variable date.</li>
<li><strong>Variable date - occurrence in month</strong>: from a start variable date to an end weekday occurrence in a month.</li>
<li><strong>Date - open end</strong>: from a start date onwards.</li>
<li><strong>Variable date - open end</strong>: from a start variable date onwards.</li>
<li><strong>Occurrence in month - open end</strong>: from a start weekday occurrence in a month onwards.</li>
<li><strong>With offsets...</strong>: the same entries as above however with offsets specified (this is rarely used).</li>
</ul>
</li>
<li><strong>Add year range...</strong>    <ul>
<li><strong>Add year range</strong>: add a year based selector.</li>
<li><strong>Add starting year</strong>: add an open ended year range.</li>
</ul>
</li>
<li><strong>Add week range</strong>: add a week number based selector.</li>
<li><strong>Duplicate</strong>: create a copy of this rule and insert it after the current position.</li>
<li><strong>Show rule type</strong>: display and allow changing of the rule type <em>normal</em>, <em>additive</em> and <em>fallback</em> (not available on the first rule).</li>
<li><strong>Move up</strong>: move this rule up one position (not available on the first rule).</li>
<li><strong>Move down</strong>: move this rule down one position.</li>
<li><strong>Delete</strong>: delete this rule.</li>
</ul>
<h3 id="time-spans">Time spans<a class="headerlink" href="#time-spans" title="Permanent link">#</a></h3>
<p>To make editing time spans as easy as possible, we try to choose an optimal time range and granularity for the range bars when loading existing values. For new time spans the bars start at 6:00 (am) and have 15 minute increments, this can be changed via the menu.</p>
<p>Clicking (not on the pins) the time bar will open the large time picker, when using the bars directly is too difficult. The time pickers extend in to the next day, so they are a simple way to extend a time range without having to delete and re-add the the range.</p>
<h4 id="time-span-menu">Time span menu<a class="headerlink" href="#time-span-menu" title="Permanent link">#</a></h4>
<ul>
<li><strong>Display time picker</strong>: show a large time picker for selecting start and end time, on very small displays this is the preferred way of changing times.</li>
<li><strong>Switch to 15 minute ticks</strong>: use 15 minute granularity for the range bar.</li>
<li><strong>Switch to 5 minute ticks</strong>: use 5 minute granularity for the range bar.</li>
<li><strong>Switch to 1 minute ticks</strong>: use 1 minute granularity for the range bar, very difficult to use on a phone.</li>
<li><strong>Start at midnight</strong>: start the range bar at midnight.</li>
<li><strong>Show interval</strong>: show the interval field for specifying an interval in minutes.</li>
<li><strong>Delete</strong>: delete this time span.</li>
</ul>
<h3 id="manage-templates">Manage templates<a class="headerlink" href="#manage-templates" title="Permanent link">#</a></h3>
<p>The template management dialog allows you to add, edit and delete templates.</p>
<p>In Android 4.4 and later the following additional functionality is available from the menu button. </p>
<ul>
<li><strong>Show all</strong>: display all templates in the database.</li>
<li><strong>Save to file</strong>: write the contents of the template database to a file.</li>
<li><strong>Load from file (replace)</strong>: load templates from a file replacing the current contents of the database.</li>
<li><strong>Load from file</strong>: load templates from a file retaining the current contents.</li>
</ul>
<h4 id="save-and-edit-template-dialogs">Save and edit template dialogs<a class="headerlink" href="#save-and-edit-template-dialogs" title="Permanent link">#</a></h4>
<p>The dialog allows you to set</p>
<ul>
<li><strong>Name</strong> a descriptive name for the template.</li>
<li><strong>Default</strong> if checked this will be consider as a default template (typically further constrained by the other fields).</li>
<li><strong>Key</strong> the key this template is relevant for, if set to <em>Custom key</em> you can add a non-standard value in the field below. The key values support SQL wild cards, that is <em>%</em> matches zero or more characters, <em>_</em> matches a single character. Both wild card characters can be escaped with <em>\</em> for literal matches.</li>
<li><strong>Region</strong> the region the template is applicable to.</li>
<li><strong>Object</strong> an application specific string to use for matching.</li>
</ul></div>
                    
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
	    <!--            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p> -->
	    <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> for Vespucci 20.2.0 </p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
